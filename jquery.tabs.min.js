/**
 * @author Dan Bettles <dan@powder-blue.com>
 * @copyright Powder Blue Ltd 2015
 * @license MIT
 */

!function(){"use strict";function t(t,s){var e;e=jQuery.extend({createTabs:!1,select:jQuery.noop},s||{}),this.setEl(t),this.setOptions(e),this.setTabsEl(void 0)}t.CSS_CLASS_SELECTED="tabby-selected",t.prototype={setEl:function(t){return this.$el=t,this},getEl:function(){return this.$el},setOptions:function(t){return this.options=t,this},getOptions:function(){return this.options},findTabsEl:function(){return this.getEl().children("ul, ol").first()},setTabsEl:function(t){return this.$tabs=t,this},getTabsEl:function(){return this.$tabs},getTabEls:function(){return this.getTabsEl().children()},getPageEls:function(){return this.getEl().children().not(this.getTabsEl())},tabClick:function(s){var e,i,a;if(a=s.data("tabby-page-selector"),void 0===a?(e=s.index(),this.getPageEls().each(function(t){return t===e?(i=jQuery(this),!1):void 0})):i=this.getEl().find(a),!i||!i.size())throw"Failed to determine the page to select.";return this.getPageEls().removeClass(t.CSS_CLASS_SELECTED),i.addClass(t.CSS_CLASS_SELECTED),this.getTabEls().removeClass(t.CSS_CLASS_SELECTED),s.addClass(t.CSS_CLASS_SELECTED),this.getOptions().select.call(this,void 0,{panel:i}),this},setUp:function(){var t,s=this;if(!this.getOptions().createTabs){if(t=this.findTabsEl(),!t.size())throw"Failed to find tabs.";this.setTabsEl(t)}if(!this.getTabsEl()||!this.getTabsEl().size())throw"There are no tabs.";return this.getEl().addClass("tabby"),this.getTabsEl().addClass("tabby-tabs"),this.getTabEls().each(function(){var t,e,i,a=jQuery(this);t=a.find("a"),t.size()&&(t.click(function(t){t.preventDefault()}),e=t.first().attr("href"),i=e.match(/^(#.*)$/),null!==i&&a.data("tabby-page-selector",i[1])),a.click(function(){s.tabClick(jQuery(this))}).addClass("tabby-tab")}),this.getPageEls().addClass("tabby-page"),this.tabClick(this.getTabEls().first()),this}},jQuery.fn.extend({tabs:function(s){return this.each(function(){var e=jQuery(this);e.data("tabby",new t(e,s)).data("tabby").setUp()})}})}();